#!/usr/bin/env node

// cli
// coimport a.css 
// coimport a.css a_co.css

var program = require('commander');
var pkg = require('../package.json');
var coimport = require('../index');
var fs = require('fs');
var chalk = require('chalk');

program
  .version(pkg.version)
  .usage('<sourcefile> [<destfile>]' + chalk.gray(' # if no `destfile` arg, destfile will be sourcefile'))
  .parse(process.argv);

//console.log(program.args)
var args = program.args;
var sourcefile = args[0];
var destfile = (args[1] || sourcefile);

coimport(sourcefile, function (cssStr) {
	fs.writeFileSync(destfile, cssStr, {encoding: 'utf8'});
	console.log(chalk.green('[Success] ') + destfile);
});
