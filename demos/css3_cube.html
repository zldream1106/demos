<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>A CSS3 Cube</title>
    <style>
fieldset {
  margin: 0;
  padding: 0; }

.hide {
  display: none; }

.stage {
  position: relative;
  width: 500px;
  height: 500px;
  background: #eee;
  -webkit-perspective: 500px;
          perspective: 500px;
  -webkit-perspective-origin: 50% 50%;
          perspective-origin: 50% 50%; }
  .stage .controller {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 500px; }
    .stage .controller .control {
      position: absolute;
      left: 0;
      top: 0;
      background: rgba(255, 255, 0, 0.5); }
    .stage .controller .control-attribute {
      position: absolute;
      right: 0;
      top: 0;
      background: rgba(255, 255, 0, 0.5); }
    .stage .controller .control-value {
      position: absolute;
      left: 0;
      bottom: 0;
      width: 100%;
      background: rgba(255, 255, 0, 0.5); }
      .stage .controller .control-value label {
        display: inline-block;
        width: 150px; }
  .stage .btn {
    min-width: 100px;
    height: 20px;
    line-height: 20px;
    margin: 5px;
    border: 1px solid black;
    border-radius: 5px;
    text-align: center; }
    .stage .btn.chosen {
      background: #f70;
      border: 1px solid red; }
  .stage .container {
    position: absolute;
    -webkit-transform-style: preserve-3d;
            transform-style: preserve-3d;
    -webkit-transform: translate3d(-50%, -50%, 0);
            transform: translate3d(-50%, -50%, 0);
    width: 150px;
    height: 150px;
    left: 50%;
    top: 50%;
    -webkit-transition: -webkit-transform 0.5s linear;
    transition: -webkit-transform 0.5s linear;
    transition: transform 0.5s linear;
    transition: transform 0.5s linear, -webkit-transform 0.5s linear; }
    .stage .container .line {
      border: 1px dashed black;
      position: absolute;
      -webkit-transform: translate3d(-50%, -50%, 0);
              transform: translate3d(-50%, -50%, 0); }
      .stage .container .line.line-x {
        width: 100%;
        height: 0;
        left: 50%;
        top: 50%; }
        .stage .container .line.line-x::after {
          content: 'x'; }
      .stage .container .line.line-y {
        width: 0;
        height: 100%;
        left: 50%;
        top: 50%; }
        .stage .container .line.line-y::after {
          content: 'y'; }
      .stage .container .line.line-z {
        width: 100%;
        height: 0;
        left: 50%;
        top: 50%;
        -webkit-transform: translate3d(-50%, -50%, 0) rotateY(90deg);
                transform: translate3d(-50%, -50%, 0) rotateY(90deg); }
        .stage .container .line.line-z::after {
          content: 'z'; }
    .stage .container .side {
      position: absolute;
      left: 0;
      top: 0;
      width: 150px;
      height: 150px;
      border: 1px solid black;
      line-height: 150px;
      text-align: center;
      font-size: 40px;
      font-weight: 700;
      color: white;
      background: #eee; }
      .stage .container .side.visibility {
        -webkit-backface-visibility: hidden;
                backface-visibility: hidden; }
    .stage .container.show1 {
      -webkit-transform: translate3d(-50%, -50%, 0);
              transform: translate3d(-50%, -50%, 0); }
    .stage .container.show2 {
      -webkit-transform: translate3d(-50%, -50%, 0) rotateX(-90deg);
              transform: translate3d(-50%, -50%, 0) rotateX(-90deg); }
    .stage .container.show3 {
      -webkit-transform: translate3d(-50%, -50%, 0) rotateY(90deg);
              transform: translate3d(-50%, -50%, 0) rotateY(90deg); }
    .stage .container.show4 {
      -webkit-transform: translate3d(-50%, -50%, 0) rotateY(-90deg);
              transform: translate3d(-50%, -50%, 0) rotateY(-90deg); }
    .stage .container.show5 {
      -webkit-transform: translate3d(-50%, -50%, 0) rotateX(90deg);
              transform: translate3d(-50%, -50%, 0) rotateX(90deg); }
    .stage .container.show6 {
      -webkit-transform: translate3d(-50%, -50%, 0) rotateY(180deg);
              transform: translate3d(-50%, -50%, 0) rotateY(180deg); }

#d1 {
  background-color: rgba(255, 0, 0, 0.5);
  -webkit-transform: translate3d(0, 0, 75px);
          transform: translate3d(0, 0, 75px); }

#d2 {
  background-color: rgba(255, 255, 0, 0.5);
  -webkit-transform: rotateX(90deg) translate3d(0, 0, 75px);
          transform: rotateX(90deg) translate3d(0, 0, 75px); }

#d3 {
  background-color: rgba(0, 255, 255, 0.5);
  -webkit-transform: rotateY(-90deg) translate3d(0, 0, 75px);
          transform: rotateY(-90deg) translate3d(0, 0, 75px); }

#d4 {
  background-color: rgba(0, 255, 0, 0.5);
  -webkit-transform: rotateY(90deg) translate3d(0, 0, 75px);
          transform: rotateY(90deg) translate3d(0, 0, 75px); }

#d5 {
  background-color: rgba(255, 0, 255, 0.5);
  -webkit-transform: rotateX(-90deg) translate3d(0, 0, 75px);
          transform: rotateX(-90deg) translate3d(0, 0, 75px); }

#d6 {
  background-color: rgba(0, 0, 255, 0.5);
  -webkit-transform: rotateY(-180deg) translate3d(0, 0, 75px);
          transform: rotateY(-180deg) translate3d(0, 0, 75px); }

</style>
  </head>
  <body>
    <div class="stage">
      <div class="controller">
        <div class="control">
          <div id="c1" class="btn">show1</div>
          <div id="c2" class="btn">show2</div>
          <div id="c3" class="btn">show3</div>
          <div id="c4" class="btn">show4</div>
          <div id="c5" class="btn">show5</div>
          <div id="c6" class="btn">show6</div>
          <div id="rotate" class="btn">rotate</div>
        </div>
        <div class="control-attribute">
          <div id="attr-hideaxis" class="btn">hide-axis</div>
          <div id="attr-visibility" class="btn">face-visibility</div>
        </div>
        <div class="control-value">
          <fieldset>
            <label class="ctr-v">perspective:</label>
            <input id="attr-perspective" type="input" placeholder="" name="attr-perspective">
          </fieldset>
          <fieldset>
            <label class="ctr-v">perspective-origin:</label>
            <input id="attr-perspective-origin-x" type="input" placeholder="x" name="attr-perspective-origin-x">
            <input id="attr-perspective-origin-y" type="input" placeholder="y" name="attr-perspective-origin-y">
          </fieldset>
          <fieldset>
            <label class="ctr-v">rotate-interval:</label>
            <input id="attr-interval" type="input" placeholder="" name="attr-rotate-interval">
          </fieldset>
          <div id="update" class="btn">update</div>
          <div id="reset" class="btn">reset </div>
        </div>
      </div>
      <div class="container">
        <div class="line-box">
          <div class="line-x line"></div>
          <div class="line-y line"></div>
          <div class="line-z line"></div>
        </div>
        <div id="d1" class="side">1</div>
        <div id="d2" class="side">2</div>
        <div id="d3" class="side">3</div>
        <div id="d4" class="side">4</div>
        <div id="d5" class="side">5</div>
        <div id="d6" class="side">6</div>
      </div>
      <script type="text/javascript">
'use strict';

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var $ = document.querySelector.bind(document);
var $$ = document.querySelectorAll.bind(document);
var container = $('.container');
var N = 6;
var runCnt = 0;
var transformTimer = null;
var timerInterval = 300;

// 恢复container的角度状态到初始状态
function resetContainer() {
  container.style.webkitTransform = '';
}

// 左侧控制组，单选
document.querySelector('.control').addEventListener('click', function (e) {
  var current = e.target;
  var previous = document.querySelector('.chosen');
  var btnId;

  if ([].concat(_toConsumableArray(current.classList)).includes('control')) return;
  clearInterval(transformTimer);
  update(); // 应用配置

  if (current === previous) {} else {
    if (previous) {
      previous.classList.remove('chosen');
    }
    current.classList.add('chosen');
  }

  update(); // 应用配置
  switch (current.id) {
    case 'rotate':
      runCnt++;
      runRotate(runCnt, timerInterval);
      break;
    default:
      resetContainer();
      previous && previous.id === 'rotate' ? runCnt++ : '';
      btnId = current.id.match(/c(\d+)/i)[1];
      container.className = 'container';
      container.classList.add('show' + btnId);
  }
});

// 右侧控制组，复选
$('.control-attribute').addEventListener('click', function (e) {
  var current = e.target;
  current.classList.toggle('chosen');
  var btnId;

  switch (current.id) {
    case 'attr-visibility':
      Array.from(container.querySelectorAll('.side')).forEach(function (el) {
        el.classList.toggle('visibility');
      });
      break;
    case 'attr-hideaxis':
      document.querySelector('.line-box').classList.toggle('hide');
      break;
    default:
      break;
  }
});

// 随机生成度数
function genRotateDeg() {
  var rX = Math.random() * 360;
  var rY = Math.random() * 360;
  var rZ = Math.random() * 360;
  return 'rotateX(' + rX + 'deg) rotateY(' + rY + 'deg) rotateZ(' + rZ + 'deg)';
  // return 'rotateX(' + rX + 'deg) rotateY(' + rY + 'deg)';
}

// 随机旋转立方体
function runRotate(runCnt) {
  var interval = arguments.length <= 1 || arguments[1] === undefined ? 300 : arguments[1];

  var transformText = '';
  timerInterval = interval;
  if (runCnt % 2) {
    // 转动开始
    transformTimer = setInterval(function () {
      transformText = 'translate3d(-50%, -50%, 0) ' + genRotateDeg();
      container.style.webkitTransform = transformText;
      container.style.transition = 'transform ' + interval / 1000 + 's linear';
    }, interval);
  } else {
    // 转动结束
    clearInterval(transformTimer);
  }
}

function update() {
  var stage = $('.stage');
  var opts = $$('fieldset input');
  Array.from(opts).forEach(function (opt) {
    var value = opt.value;
    var matched = value.match(/\d+/);
    switch (opt.name) {
      case 'attr-perspective':
        stage.style.webkitPerspective = (matched && matched[0] || 500) + 'px';
        break;
      case 'attr-perspective-origin-x':
      case 'attr-perspective-origin-y':
        var x = $('#attr-perspective-origin-x').value;
        var y = $('#attr-perspective-origin-y').value;
        stage.style.webkitPerspectiveOrigin = (x && x + 'px ' || '50% ') + ($('#attr-perspective-origin-y').value + 'px' || '50%');
        break;
      case 'attr-rotate-interval':
        container.style.transition = 'transform ' + (value / 1000 || 0.3) + 's linear';
      default:
        ;
    }
  });
}

$('#update').addEventListener('click', function (e) {
  update();
});

$('#reset').addEventListener('click', function (e) {
  var me = e.target;
  var stage = $('.stage');
  var opts = $$('fieldset input');
  Array.from(opts).forEach(function (opt) {
    opt.value = '';
  });
  stage.style.webkitPerspective = '500px';
  stage.style.webkitPerspectiveOrigin = '50% 50%';
  container.style.webkitTransition = 'transform 0.3s linear';
});
//# sourceMappingURL=data:application/json;base64,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RCxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFVBQVMsQ0FBQyxFQUFFO0FBQ2pELFFBQU0sRUFBRSxDQUFDO0NBQ1YsQ0FBQyxDQUFDOztBQUVILENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFDakQsTUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQztBQUNsQixNQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDeEIsTUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDaEMsT0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUUsVUFBVSxHQUFHLEVBQUU7QUFDdkMsT0FBRyxDQUFDLEtBQUssR0FBQyxFQUFFLENBQUM7R0FDZCxDQUFDLENBQUM7QUFDSCxPQUFLLENBQUMsS0FBSyxDQUFDLGlCQUFpQixHQUFHLE9BQU8sQ0FBQztBQUN4QyxPQUFLLENBQUMsS0FBSyxDQUFDLHVCQUF1QixHQUFHLFNBQVMsQ0FBQztBQUNoRCxXQUFTLENBQUMsS0FBSyxDQUFDLGdCQUFnQixHQUFHLHVCQUF1QixDQUFDO0NBQzVELENBQUMsQ0FBQyIsImZpbGUiOiJqcy9jc3MzX2N1YmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgJCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IuYmluZChkb2N1bWVudCk7XG52YXIgJCQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsLmJpbmQoZG9jdW1lbnQpO1xudmFyIGNvbnRhaW5lciA9ICQoJy5jb250YWluZXInKTtcbnZhciBOID0gNjtcbnZhciBydW5DbnQgPSAwO1xudmFyIHRyYW5zZm9ybVRpbWVyID0gbnVsbDtcbnZhciB0aW1lckludGVydmFsID0gMzAwO1xuXG4vLyDmgaLlpI1jb250YWluZXLnmoTop5LluqbnirbmgIHliLDliJ3lp4vnirbmgIFcbmZ1bmN0aW9uIHJlc2V0Q29udGFpbmVyKCkge1xuICBjb250YWluZXIuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gJyc7XG59XG5cbi8vIOW3puS+p+aOp+WItue7hO+8jOWNlemAiVxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRyb2wnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgdmFyIGN1cnJlbnQgPSBlLnRhcmdldDtcbiAgdmFyIHByZXZpb3VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNob3NlbicpO1xuICB2YXIgYnRuSWQ7XG5cbiAgaWYgKFsuLi5jdXJyZW50LmNsYXNzTGlzdF0uaW5jbHVkZXMoJ2NvbnRyb2wnKSkgcmV0dXJuO1xuICBjbGVhckludGVydmFsKHRyYW5zZm9ybVRpbWVyKTtcbiAgdXBkYXRlKCk7IC8vIOW6lOeUqOmFjee9rlxuXG4gIGlmIChjdXJyZW50ID09PSBwcmV2aW91cykge30gZWxzZSB7XG4gICAgaWYgKHByZXZpb3VzKSB7XG4gICAgICBwcmV2aW91cy5jbGFzc0xpc3QucmVtb3ZlKCdjaG9zZW4nKTtcbiAgICB9XG4gICAgY3VycmVudC5jbGFzc0xpc3QuYWRkKCdjaG9zZW4nKTtcbiAgfVxuXG4gIHVwZGF0ZSgpOyAvLyDlupTnlKjphY3nva5cbiAgc3dpdGNoIChjdXJyZW50LmlkKSB7XG4gICAgY2FzZSAncm90YXRlJzpcbiAgICAgIHJ1bkNudCsrO1xuICAgICAgcnVuUm90YXRlKHJ1bkNudCwgdGltZXJJbnRlcnZhbCk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcmVzZXRDb250YWluZXIoKTtcbiAgICAgIChwcmV2aW91cyAmJiAocHJldmlvdXMuaWQgPT09ICdyb3RhdGUnKSkgPyBydW5DbnQrKyA6ICcnO1xuICAgICAgYnRuSWQgPSBjdXJyZW50LmlkLm1hdGNoKC9jKFxcZCspL2kpWzFdO1xuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdjb250YWluZXInO1xuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Nob3cnICsgYnRuSWQpO1xuICB9XG59KTtcblxuLy8g5Y+z5L6n5o6n5Yi257uE77yM5aSN6YCJXG4kKCcuY29udHJvbC1hdHRyaWJ1dGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgdmFyIGN1cnJlbnQgPSBlLnRhcmdldDtcbiAgY3VycmVudC5jbGFzc0xpc3QudG9nZ2xlKCdjaG9zZW4nKTtcbiAgdmFyIGJ0bklkO1xuXG4gIHN3aXRjaCAoY3VycmVudC5pZCkge1xuICAgIGNhc2UgJ2F0dHItdmlzaWJpbGl0eSc6XG4gICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZScpKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC50b2dnbGUoJ3Zpc2liaWxpdHknKTtcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnYXR0ci1oaWRlYXhpcyc6XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGluZS1ib3gnKS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlJyk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gIH1cbn0pO1xuXG4vLyDpmo/mnLrnlJ/miJDluqbmlbBcbmZ1bmN0aW9uIGdlblJvdGF0ZURlZygpIHtcbiAgdmFyIHJYID0gTWF0aC5yYW5kb20oKSAqIDM2MDtcbiAgdmFyIHJZID0gTWF0aC5yYW5kb20oKSAqIDM2MDtcbiAgdmFyIHJaID0gTWF0aC5yYW5kb20oKSAqIDM2MDtcbiAgcmV0dXJuICdyb3RhdGVYKCcgKyByWCArICdkZWcpIHJvdGF0ZVkoJyArIHJZICsgJ2RlZykgcm90YXRlWignICsgclogKyAnZGVnKSc7XG4gIC8vIHJldHVybiAncm90YXRlWCgnICsgclggKyAnZGVnKSByb3RhdGVZKCcgKyByWSArICdkZWcpJztcbn1cblxuLy8g6ZqP5py65peL6L2s56uL5pa55L2TIFxuZnVuY3Rpb24gcnVuUm90YXRlKHJ1bkNudCwgaW50ZXJ2YWwgPSAzMDApIHtcbiAgdmFyIHRyYW5zZm9ybVRleHQgPSAnJztcbiAgdGltZXJJbnRlcnZhbCA9IGludGVydmFsO1xuICBpZiAocnVuQ250ICUgMikgeyAvLyDovazliqjlvIDlp4tcbiAgICB0cmFuc2Zvcm1UaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgdHJhbnNmb3JtVGV4dCA9ICd0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKSAnICsgZ2VuUm90YXRlRGVnKCk7XG4gICAgICBjb250YWluZXIuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gdHJhbnNmb3JtVGV4dDtcbiAgICAgIGNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gJ3RyYW5zZm9ybSAnICsgKGludGVydmFsIC8gMTAwMCkgKyAncyBsaW5lYXInO1xuICAgIH0sIGludGVydmFsKTtcbiAgfSBlbHNlIHsgLy8g6L2s5Yqo57uT5p2fXG4gICAgY2xlYXJJbnRlcnZhbCh0cmFuc2Zvcm1UaW1lcik7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiB1cGRhdGUgKCkge1xuICB2YXIgc3RhZ2UgPSAkKCcuc3RhZ2UnKTtcbiAgdmFyIG9wdHMgPSAkJCgnZmllbGRzZXQgaW5wdXQnKTtcbiAgQXJyYXkuZnJvbShvcHRzKS5mb3JFYWNoKGZ1bmN0aW9uKG9wdCkge1xuICAgIHZhciB2YWx1ZSA9IG9wdC52YWx1ZTtcbiAgICB2YXIgbWF0Y2hlZCA9IHZhbHVlLm1hdGNoKC9cXGQrLyk7XG4gICAgc3dpdGNoIChvcHQubmFtZSkge1xuICAgICAgY2FzZSAnYXR0ci1wZXJzcGVjdGl2ZSc6XG4gICAgICAgIHN0YWdlLnN0eWxlLndlYmtpdFBlcnNwZWN0aXZlID0gKCAobWF0Y2hlZCAmJiBtYXRjaGVkWzBdKSB8fCA1MDApICsgJ3B4JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdhdHRyLXBlcnNwZWN0aXZlLW9yaWdpbi14JzpcbiAgICAgIGNhc2UgJ2F0dHItcGVyc3BlY3RpdmUtb3JpZ2luLXknOlxuICAgICAgICB2YXIgeCA9ICQoJyNhdHRyLXBlcnNwZWN0aXZlLW9yaWdpbi14JykudmFsdWU7XG4gICAgICAgIHZhciB5ID0gJCgnI2F0dHItcGVyc3BlY3RpdmUtb3JpZ2luLXknKS52YWx1ZTtcbiAgICAgICAgc3RhZ2Uuc3R5bGUud2Via2l0UGVyc3BlY3RpdmVPcmlnaW4gPSAoKCB4ICYmICh4ICsgJ3B4ICcpKSB8fCAnNTAlICcpICsgKCgkKCcjYXR0ci1wZXJzcGVjdGl2ZS1vcmlnaW4teScpLnZhbHVlICsgJ3B4JykgfHwgJzUwJScpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2F0dHItcm90YXRlLWludGVydmFsJzpcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSAndHJhbnNmb3JtICcgKyAodmFsdWUvMTAwMCB8fCAwLjMpICsgJ3MgbGluZWFyJztcbiAgICAgIGRlZmF1bHQ6O1xuICAgIH1cbiAgfSk7XG4gIFxufVxuXG4kKCcjdXBkYXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gIHVwZGF0ZSgpO1xufSk7XG5cbiQoJyNyZXNldCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgdmFyIG1lID0gZS50YXJnZXQ7XG4gIHZhciBzdGFnZSA9ICQoJy5zdGFnZScpO1xuICB2YXIgb3B0cyA9ICQkKCdmaWVsZHNldCBpbnB1dCcpO1xuICBBcnJheS5mcm9tKG9wdHMpLmZvckVhY2goIGZ1bmN0aW9uIChvcHQpIHtcbiAgICBvcHQudmFsdWU9Jyc7XG4gIH0pO1xuICBzdGFnZS5zdHlsZS53ZWJraXRQZXJzcGVjdGl2ZSA9ICc1MDBweCc7XG4gIHN0YWdlLnN0eWxlLndlYmtpdFBlcnNwZWN0aXZlT3JpZ2luID0gJzUwJSA1MCUnO1xuICBjb250YWluZXIuc3R5bGUud2Via2l0VHJhbnNpdGlvbiA9ICd0cmFuc2Zvcm0gMC4zcyBsaW5lYXInO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
</script>
    </div>
  </body>
</html>