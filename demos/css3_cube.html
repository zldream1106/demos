<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="format-detection" content="telephone=no, email=no">
    <title>A CSS3 Cube</title>
    <script type="text/javascript" src="//g.alicdn.com/mtb/lib-flexible/0.3.2/flexible.js" keeplive=""></script>
    <style>
html,
body,
.stage {
  height: 100%;
}

.hide {
  display: none;
}

.stage {
  position: relative;
  width: 100%;
  height: 100%;
  background: #eee;
  -webkit-perspective: 6.666667rem;
          perspective: 6.666667rem;
  -webkit-perspective-origin: 50% 50%;
          perspective-origin: 50% 50%;
}

.stage .controller {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 99;
  width: 100%;
  height: 100%;
}

.stage .controller .control {
  position: absolute;
  left: 0;
  top: 0;
  background: rgba(255, 255, 0, 0.5);
}

.stage .controller .control-attribute {
  position: absolute;
  right: 0;
  top: 0;
  background: rgba(255, 255, 0, 0.5);
}

.stage .controller .control-value {
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  background: rgba(255, 255, 0, 0.5);
}

.stage .controller .control-value label {
  display: inline-block;
  width: 4rem;
}

.stage .controller .control-value input {
  height: 0.4rem;
}

.stage .btn {
  min-width: 2.666667rem;
  height: 0.666667rem;
  line-height: 0.666667rem;
  margin: 0.266667rem;
  border-radius: 0.066667rem;
  text-align: center;
}

[data-dpr="1"] .stage .btn {
  border: 0.5px solid black;
}

[data-dpr="2"] .stage .btn {
  border: 1px solid black;
}

[data-dpr="3"] .stage .btn {
  border: 1.5px solid black;
}

.stage .btn.chosen {
  background: #f70;
}

[data-dpr="1"] .stage .btn.chosen {
  border: 0.5px solid red;
}

[data-dpr="2"] .stage .btn.chosen {
  border: 1px solid red;
}

[data-dpr="3"] .stage .btn.chosen {
  border: 1.5px solid red;
}

.stage .container {
  position: absolute;
  -webkit-transform-style: preserve-3d;
          transform-style: preserve-3d;
  -webkit-transform: translate3d(-50%, -50%, 0);
          transform: translate3d(-50%, -50%, 0);
  width: 2.666667rem;
  height: 2.666667rem;
  left: 50%;
  top: 50%;
  -webkit-transition: -webkit-transform 0.5s linear;
  transition: -webkit-transform 0.5s linear;
  transition: transform 0.5s linear;
  transition: transform 0.5s linear, -webkit-transform 0.5s linear;
}

.stage .container .line {
  position: absolute;
  -webkit-transform: translate3d(-50%, -50%, 0);
          transform: translate3d(-50%, -50%, 0);
}

[data-dpr="1"] .stage .container .line {
  border: 0.5px dashed black;
}

[data-dpr="2"] .stage .container .line {
  border: 1px dashed black;
}

[data-dpr="3"] .stage .container .line {
  border: 1.5px dashed black;
}

.stage .container .line.line-x {
  width: 100%;
  height: 0;
  left: 50%;
  top: 50%;
}

.stage .container .line.line-x::after {
  content: 'x';
}

.stage .container .line.line-y {
  width: 0;
  height: 100%;
  left: 50%;
  top: 50%;
}

.stage .container .line.line-y::after {
  content: 'y';
}

.stage .container .line.line-z {
  width: 100%;
  height: 0;
  left: 50%;
  top: 50%;
  -webkit-transform: translate3d(-50%, -50%, 0) rotateY(90deg);
          transform: translate3d(-50%, -50%, 0) rotateY(90deg);
}

.stage .container .line.line-z::after {
  content: 'z';
}

.stage .container .side {
  position: absolute;
  left: 0;
  top: 0;
  width: 2.666667rem;
  height: 2.666667rem;
  line-height: 2.666667rem;
  text-align: center;
  font-size: 0.533333rem;
  font-weight: 700;
  color: white;
  background: #eee;
}

[data-dpr="1"] .stage .container .side {
  border: 0.5px solid black;
}

[data-dpr="2"] .stage .container .side {
  border: 1px solid black;
}

[data-dpr="3"] .stage .container .side {
  border: 1.5px solid black;
}

.stage .container .side.visibility {
  -webkit-backface-visibility: hidden;
          backface-visibility: hidden;
}

.stage .container.show1 {
  -webkit-transform: translate3d(-50%, -50%, 0);
          transform: translate3d(-50%, -50%, 0);
}

.stage .container.show2 {
  -webkit-transform: translate3d(-50%, -50%, 0) rotateX(-90deg);
          transform: translate3d(-50%, -50%, 0) rotateX(-90deg);
}

.stage .container.show3 {
  -webkit-transform: translate3d(-50%, -50%, 0) rotateY(90deg);
          transform: translate3d(-50%, -50%, 0) rotateY(90deg);
}

.stage .container.show4 {
  -webkit-transform: translate3d(-50%, -50%, 0) rotateY(-90deg);
          transform: translate3d(-50%, -50%, 0) rotateY(-90deg);
}

.stage .container.show5 {
  -webkit-transform: translate3d(-50%, -50%, 0) rotateX(90deg);
          transform: translate3d(-50%, -50%, 0) rotateX(90deg);
}

.stage .container.show6 {
  -webkit-transform: translate3d(-50%, -50%, 0) rotateY(180deg);
          transform: translate3d(-50%, -50%, 0) rotateY(180deg);
}

#d1 {
  background-color: rgba(255, 0, 0, 0.5);
  -webkit-transform: translate3d(0, 0, 1.333333rem);
          transform: translate3d(0, 0, 1.333333rem);
}

#d2 {
  background-color: rgba(255, 255, 0, 0.5);
  -webkit-transform: rotateX(90deg) translate3d(0, 0, 1.333333rem);
          transform: rotateX(90deg) translate3d(0, 0, 1.333333rem);
}

#d3 {
  background-color: rgba(0, 255, 255, 0.5);
  -webkit-transform: rotateY(-90deg) translate3d(0, 0, 1.333333rem);
          transform: rotateY(-90deg) translate3d(0, 0, 1.333333rem);
}

#d4 {
  background-color: rgba(0, 255, 0, 0.5);
  -webkit-transform: rotateY(90deg) translate3d(0, 0, 1.333333rem);
          transform: rotateY(90deg) translate3d(0, 0, 1.333333rem);
}

#d5 {
  background-color: rgba(255, 0, 255, 0.5);
  -webkit-transform: rotateX(-90deg) translate3d(0, 0, 1.333333rem);
          transform: rotateX(-90deg) translate3d(0, 0, 1.333333rem);
}

#d6 {
  background-color: rgba(0, 0, 255, 0.5);
  -webkit-transform: rotateY(-180deg) translate3d(0, 0, 1.333333rem);
          transform: rotateY(-180deg) translate3d(0, 0, 1.333333rem);
}
</style>
  </head>
  <body>
    <div class="stage">
      <div class="controller">
        <div class="control">
          <div id="c1" class="btn">show1</div>
          <div id="c2" class="btn">show2</div>
          <div id="c3" class="btn">show3</div>
          <div id="c4" class="btn">show4</div>
          <div id="c5" class="btn">show5</div>
          <div id="c6" class="btn">show6</div>
          <div id="rotate" class="btn">rotate</div>
        </div>
        <div class="control-attribute">
          <div id="attr-hideaxis" class="btn">hide-axis</div>
          <div id="attr-visibility" class="btn">face-visibility</div>
        </div>
        <div class="control-value">
          <fieldset>
            <label class="ctr-v">perspective:</label>
            <input id="attr-perspective" type="input" placeholder="" name="attr-perspective">
          </fieldset>
          <fieldset>
            <label class="ctr-v">perspective-origin:</label>
            <input id="attr-perspective-origin-x" type="input" placeholder="x" name="attr-perspective-origin-x">
            <input id="attr-perspective-origin-y" type="input" placeholder="y" name="attr-perspective-origin-y">
          </fieldset>
          <fieldset>
            <label class="ctr-v">rotate-interval:</label>
            <input id="attr-interval" type="input" placeholder="" name="attr-rotate-interval">
          </fieldset>
          <div id="update" class="btn">update</div>
          <div id="reset" class="btn">reset </div>
        </div>
      </div>
      <div class="container">
        <div class="line-box">
          <div class="line-x line"></div>
          <div class="line-y line"></div>
          <div class="line-z line"></div>
        </div>
        <div id="d1" class="side">1</div>
        <div id="d2" class="side">2</div>
        <div id="d3" class="side">3</div>
        <div id="d4" class="side">4</div>
        <div id="d5" class="side">5</div>
        <div id="d6" class="side">6</div>
      </div>
      <script type="text/javascript">
'use strict';

var $ = document.querySelector.bind(document);
var $$ = document.querySelectorAll.bind(document);
var container = $('.container');
var N = 6;
var runCnt = 0;
var transformTimer = null;
var timerInterval = 300;

// 恢复container的角度状态到初始状态
function resetContainer() {
  container.style.webkitTransform = '';
}

// 左侧控制组，单选
document.querySelector('.control').addEventListener('click', function (e) {
  var current = e.target;
  var previous = document.querySelector('.chosen');
  var btnId;

  if (current.classList.contains('control')) return;
  clearInterval(transformTimer);
  update(); // 应用配置

  if (current === previous) {} else {
    if (previous) {
      previous.classList.remove('chosen');
    }
    current.classList.add('chosen');
  }

  update(); // 应用配置
  switch (current.id) {
    case 'rotate':
      runCnt++;
      runRotate(runCnt, timerInterval);
      break;
    default:
      resetContainer();
      previous && previous.id === 'rotate' ? runCnt++ : '';
      btnId = current.id.match(/c(\d+)/i)[1];
      container.className = 'container';
      container.classList.add('show' + btnId);
  }
});

// 右侧控制组，复选
$('.control-attribute').addEventListener('click', function (e) {
  var current = e.target;
  current.classList.toggle('chosen');
  var btnId;

  switch (current.id) {
    case 'attr-visibility':
      //Array.from(container.querySelectorAll('.side')).forEach(function(el) {
      Array.prototype.forEach.call(container.querySelectorAll('.side'), function (el) {
        el.classList.toggle('visibility');
      });
      break;
    case 'attr-hideaxis':
      document.querySelector('.line-box').classList.toggle('hide');
      break;
    default:
      break;
  }
});

// 随机生成度数
function genRotateDeg() {
  var rX = Math.random() * 360;
  var rY = Math.random() * 360;
  var rZ = Math.random() * 360;
  return 'rotateX(' + rX + 'deg) rotateY(' + rY + 'deg) rotateZ(' + rZ + 'deg)';
  // return 'rotateX(' + rX + 'deg) rotateY(' + rY + 'deg)';
}

// 随机旋转立方体
function runRotate(runCnt) {
  var interval = arguments.length <= 1 || arguments[1] === undefined ? 300 : arguments[1];

  var transformText = '';
  timerInterval = interval;
  if (runCnt % 2) {
    // 转动开始
    transformTimer = setInterval(function () {
      transformText = 'translate3d(-50%, -50%, 0) ' + genRotateDeg();
      container.style.webkitTransform = transformText;
      container.style.transition = 'transform ' + interval / 1000 + 's linear';
    }, interval);
  } else {
    // 转动结束
    clearInterval(transformTimer);
  }
}

function update() {
  var stage = $('.stage');
  var opts = $$('fieldset input');
  // Array.from(opts).forEach(function(opt) {
  Array.prototype.forEach.call(opts, function (opt) {
    var value = opt.value;
    var matched = value.match(/\d+/);
    switch (opt.name) {
      case 'attr-perspective':
        stage.style.webkitPerspective = (matched && matched[0] || 500) + 'px';
        break;
      case 'attr-perspective-origin-x':
      case 'attr-perspective-origin-y':
        var x = $('#attr-perspective-origin-x').value;
        var y = $('#attr-perspective-origin-y').value;
        stage.style.webkitPerspectiveOrigin = (x && x + 'px ' || '50% ') + ($('#attr-perspective-origin-y').value + 'px' || '50%');
        break;
      case 'attr-rotate-interval':
        container.style.transition = 'transform ' + (value / 1000 || 0.3) + 's linear';
      default:
        ;
    }
  });
}

$('#update').addEventListener('click', function (e) {
  update();
});

$('#reset').addEventListener('click', function (e) {
  var me = e.target;
  var stage = $('.stage');
  var opts = $$('fieldset input');
  // Array.from(opts).forEach( function (opt) {
  Array.prototype.forEach.call(opts, function (opt) {
    opt.value = '';
  });
  stage.style.webkitPerspective = 500 / window.rem + 'rem';
  stage.style.webkitPerspectiveOrigin = '50% 50%';
  container.style.webkitTransition = 'transform 0.3s linear';
});

window.onerror = function (a, b, c, d) {
  alert(a, b, c, d);
};
//# sourceMappingURL=data:application/json;base64,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O0FBRUQsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxVQUFTLENBQUMsRUFBRTtBQUNqRCxRQUFNLEVBQUUsQ0FBQztDQUNWLENBQUMsQ0FBQzs7QUFFSCxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxFQUFFO0FBQ2pELE1BQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDbEIsTUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3hCLE1BQUksSUFBSSxHQUFHLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQzs7QUFBQyxBQUVoQyxPQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQ2hELE9BQUcsQ0FBQyxLQUFLLEdBQUMsRUFBRSxDQUFDO0dBQ2QsQ0FBQyxDQUFDO0FBQ0gsT0FBSyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsR0FBRyxHQUFHLEdBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUM7QUFDdkQsT0FBSyxDQUFDLEtBQUssQ0FBQyx1QkFBdUIsR0FBRyxTQUFTLENBQUM7QUFDaEQsV0FBUyxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsR0FBRyx1QkFBdUIsQ0FBQztDQUM1RCxDQUFDLENBQUM7O0FBRUgsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRTtBQUNsQyxPQUFLLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDZixDQUFBIiwiZmlsZSI6ImpzL2NzczNfY3ViZS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciAkID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvci5iaW5kKGRvY3VtZW50KTtcbnZhciAkJCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwuYmluZChkb2N1bWVudCk7XG52YXIgY29udGFpbmVyID0gJCgnLmNvbnRhaW5lcicpO1xudmFyIE4gPSA2O1xudmFyIHJ1bkNudCA9IDA7XG52YXIgdHJhbnNmb3JtVGltZXIgPSBudWxsO1xudmFyIHRpbWVySW50ZXJ2YWwgPSAzMDA7XG5cbi8vIOaBouWkjWNvbnRhaW5lcueahOinkuW6pueKtuaAgeWIsOWIneWni+eKtuaAgVxuZnVuY3Rpb24gcmVzZXRDb250YWluZXIoKSB7XG4gIGNvbnRhaW5lci5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSAnJztcbn1cblxuLy8g5bem5L6n5o6n5Yi257uE77yM5Y2V6YCJXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udHJvbCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICB2YXIgY3VycmVudCA9IGUudGFyZ2V0O1xuICB2YXIgcHJldmlvdXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hvc2VuJyk7XG4gIHZhciBidG5JZDtcblxuICBpZiAoY3VycmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbnRyb2wnKSkgcmV0dXJuO1xuICBjbGVhckludGVydmFsKHRyYW5zZm9ybVRpbWVyKTtcbiAgdXBkYXRlKCk7IC8vIOW6lOeUqOmFjee9rlxuXG4gIGlmIChjdXJyZW50ID09PSBwcmV2aW91cykge30gZWxzZSB7XG4gICAgaWYgKHByZXZpb3VzKSB7XG4gICAgICBwcmV2aW91cy5jbGFzc0xpc3QucmVtb3ZlKCdjaG9zZW4nKTtcbiAgICB9XG4gICAgY3VycmVudC5jbGFzc0xpc3QuYWRkKCdjaG9zZW4nKTtcbiAgfVxuXG4gIHVwZGF0ZSgpOyAvLyDlupTnlKjphY3nva5cbiAgc3dpdGNoIChjdXJyZW50LmlkKSB7XG4gICAgY2FzZSAncm90YXRlJzpcbiAgICAgIHJ1bkNudCsrO1xuICAgICAgcnVuUm90YXRlKHJ1bkNudCwgdGltZXJJbnRlcnZhbCk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcmVzZXRDb250YWluZXIoKTtcbiAgICAgIChwcmV2aW91cyAmJiAocHJldmlvdXMuaWQgPT09ICdyb3RhdGUnKSkgPyBydW5DbnQrKyA6ICcnO1xuICAgICAgYnRuSWQgPSBjdXJyZW50LmlkLm1hdGNoKC9jKFxcZCspL2kpWzFdO1xuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdjb250YWluZXInO1xuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Nob3cnICsgYnRuSWQpO1xuICB9XG59KTtcblxuLy8g5Y+z5L6n5o6n5Yi257uE77yM5aSN6YCJXG4kKCcuY29udHJvbC1hdHRyaWJ1dGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgdmFyIGN1cnJlbnQgPSBlLnRhcmdldDtcbiAgY3VycmVudC5jbGFzc0xpc3QudG9nZ2xlKCdjaG9zZW4nKTtcbiAgdmFyIGJ0bklkO1xuXG4gIHN3aXRjaCAoY3VycmVudC5pZCkge1xuICAgIGNhc2UgJ2F0dHItdmlzaWJpbGl0eSc6XG4gICAgICAvL0FycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlJykpLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlJyksIGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC50b2dnbGUoJ3Zpc2liaWxpdHknKTtcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnYXR0ci1oaWRlYXhpcyc6XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGluZS1ib3gnKS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlJyk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gIH1cbn0pO1xuXG4vLyDpmo/mnLrnlJ/miJDluqbmlbBcbmZ1bmN0aW9uIGdlblJvdGF0ZURlZygpIHtcbiAgdmFyIHJYID0gTWF0aC5yYW5kb20oKSAqIDM2MDtcbiAgdmFyIHJZID0gTWF0aC5yYW5kb20oKSAqIDM2MDtcbiAgdmFyIHJaID0gTWF0aC5yYW5kb20oKSAqIDM2MDtcbiAgcmV0dXJuICdyb3RhdGVYKCcgKyByWCArICdkZWcpIHJvdGF0ZVkoJyArIHJZICsgJ2RlZykgcm90YXRlWignICsgclogKyAnZGVnKSc7XG4gIC8vIHJldHVybiAncm90YXRlWCgnICsgclggKyAnZGVnKSByb3RhdGVZKCcgKyByWSArICdkZWcpJztcbn1cblxuLy8g6ZqP5py65peL6L2s56uL5pa55L2TIFxuZnVuY3Rpb24gcnVuUm90YXRlKHJ1bkNudCwgaW50ZXJ2YWwgPSAzMDApIHtcbiAgdmFyIHRyYW5zZm9ybVRleHQgPSAnJztcbiAgdGltZXJJbnRlcnZhbCA9IGludGVydmFsO1xuICBpZiAocnVuQ250ICUgMikgeyAvLyDovazliqjlvIDlp4tcbiAgICB0cmFuc2Zvcm1UaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgdHJhbnNmb3JtVGV4dCA9ICd0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKSAnICsgZ2VuUm90YXRlRGVnKCk7XG4gICAgICBjb250YWluZXIuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gdHJhbnNmb3JtVGV4dDtcbiAgICAgIGNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gJ3RyYW5zZm9ybSAnICsgKGludGVydmFsIC8gMTAwMCkgKyAncyBsaW5lYXInO1xuICAgIH0sIGludGVydmFsKTtcbiAgfSBlbHNlIHsgLy8g6L2s5Yqo57uT5p2fXG4gICAgY2xlYXJJbnRlcnZhbCh0cmFuc2Zvcm1UaW1lcik7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiB1cGRhdGUgKCkge1xuICB2YXIgc3RhZ2UgPSAkKCcuc3RhZ2UnKTtcbiAgdmFyIG9wdHMgPSAkJCgnZmllbGRzZXQgaW5wdXQnKTtcbiAgLy8gQXJyYXkuZnJvbShvcHRzKS5mb3JFYWNoKGZ1bmN0aW9uKG9wdCkge1xuICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG9wdHMsZnVuY3Rpb24ob3B0KSB7XG4gICAgdmFyIHZhbHVlID0gb3B0LnZhbHVlO1xuICAgIHZhciBtYXRjaGVkID0gdmFsdWUubWF0Y2goL1xcZCsvKTtcbiAgICBzd2l0Y2ggKG9wdC5uYW1lKSB7XG4gICAgICBjYXNlICdhdHRyLXBlcnNwZWN0aXZlJzpcbiAgICAgICAgc3RhZ2Uuc3R5bGUud2Via2l0UGVyc3BlY3RpdmUgPSAoIChtYXRjaGVkICYmIG1hdGNoZWRbMF0pIHx8IDUwMCkgKyAncHgnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2F0dHItcGVyc3BlY3RpdmUtb3JpZ2luLXgnOlxuICAgICAgY2FzZSAnYXR0ci1wZXJzcGVjdGl2ZS1vcmlnaW4teSc6XG4gICAgICAgIHZhciB4ID0gJCgnI2F0dHItcGVyc3BlY3RpdmUtb3JpZ2luLXgnKS52YWx1ZTtcbiAgICAgICAgdmFyIHkgPSAkKCcjYXR0ci1wZXJzcGVjdGl2ZS1vcmlnaW4teScpLnZhbHVlO1xuICAgICAgICBzdGFnZS5zdHlsZS53ZWJraXRQZXJzcGVjdGl2ZU9yaWdpbiA9ICgoIHggJiYgKHggKyAncHggJykpIHx8ICc1MCUgJykgKyAoKCQoJyNhdHRyLXBlcnNwZWN0aXZlLW9yaWdpbi15JykudmFsdWUgKyAncHgnKSB8fCAnNTAlJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYXR0ci1yb3RhdGUtaW50ZXJ2YWwnOlxuICAgICAgICBjb250YWluZXIuc3R5bGUudHJhbnNpdGlvbiA9ICd0cmFuc2Zvcm0gJyArICh2YWx1ZS8xMDAwIHx8IDAuMykgKyAncyBsaW5lYXInO1xuICAgICAgZGVmYXVsdDo7XG4gICAgfVxuICB9KTtcbiAgXG59XG5cbiQoJyN1cGRhdGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgdXBkYXRlKCk7XG59KTtcblxuJCgnI3Jlc2V0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICB2YXIgbWUgPSBlLnRhcmdldDtcbiAgdmFyIHN0YWdlID0gJCgnLnN0YWdlJyk7XG4gIHZhciBvcHRzID0gJCQoJ2ZpZWxkc2V0IGlucHV0Jyk7XG4gIC8vIEFycmF5LmZyb20ob3B0cykuZm9yRWFjaCggZnVuY3Rpb24gKG9wdCkge1xuICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG9wdHMsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICBvcHQudmFsdWU9Jyc7XG4gIH0pO1xuICBzdGFnZS5zdHlsZS53ZWJraXRQZXJzcGVjdGl2ZSA9IDUwMC93aW5kb3cucmVtICsgJ3JlbSc7XG4gIHN0YWdlLnN0eWxlLndlYmtpdFBlcnNwZWN0aXZlT3JpZ2luID0gJzUwJSA1MCUnO1xuICBjb250YWluZXIuc3R5bGUud2Via2l0VHJhbnNpdGlvbiA9ICd0cmFuc2Zvcm0gMC4zcyBsaW5lYXInO1xufSk7XG5cbndpbmRvdy5vbmVycm9yID0gZnVuY3Rpb24gKGEsYixjLGQpIHtcbiAgYWxlcnQoYSxiLGMsZClcbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
</script>
    </div>
  </body>
</html>